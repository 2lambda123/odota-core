extend match_base

append head
  script(type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js')
  script(type='text/javascript' src='https://code.jquery.com/jquery-2.1.1.min.js')
  
append content
  .row
    .col-md-12
      table.table.table-hover.table-responsive
        tr
          th Player
          th Hero
          th LV
          th K
          th D
          th A
          th LH
          th DN
          th GOLD
          th GPM
          th XPM
          th HD
          th TD
          th HH
          th Items
        - each player, i in match.players
         tr(class = i < 5 ? "success" : "danger")
           td
             if (player.account_id == constants.anonymous_account_id)
               ="Anonymous"
             else
               a(href='/players/#{player.account_id}')= player.personaname || player.account_id
           - var hero = constants.heroes[player.hero_id]
           td.hero
             if hero
               img(src=hero.img, alt=hero.localized_name)
             else
               =player.hero_id
           td= player.level
           td= player.kills
           td= player.deaths
           td= player.assists
           td= player.last_hits
           td= player.denies
           - var gold = player.gold_per_min*match.duration/60
           td.format= gold
           td= player.gold_per_min
           td= player.xp_per_min
           td.format= player.hero_damage
           td.format= player.tower_damage
           td.format= player.hero_healing
           td.items
             each val, index in player
               if (index.slice(0, 5)==="item_")
                 - var item = constants.items[constants.item_ids[val]]
                 if item
                   img(src=item.img, alt=item.dname)
             if (player.hero_id === 80)
               br
               each val, index in player.additional_units[0]
                 if (index.slice(0, 5)==="item_")
                   - var item = constants.items[constants.item_ids[val]]                             
                   if item
                     img(src=item.img, alt=item.dname)
      script.
        $('.format').each(function(){
          $(this).text(format($(this).text()))
        })
        function format(input){
          input = parseInt(input)
          return (input<1000 ? input : numeral(input).format('0.0a'))
        }
